<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Yukki.MainPage"
             BackgroundColor="White"
             Shell.NavBarIsVisible="False"
             Padding="0">

    <ScrollView>

        <Grid RowDefinitions="0.16*,0.84*" ColumnDefinitions="*" x:Name="Body">

            <FlexLayout>

                <AbsoluteLayout>

                    <!-- Header -->
                    <Grid BackgroundColor="#FFD84D" 
                          ColumnDefinitions="0.1*,0.8*,0.1*"
                          RowDefinitions="0.1*,0.8*,0.1*"
                          AbsoluteLayout.LayoutBounds="0.5,0,1,0.14"
                          AbsoluteLayout.LayoutFlags="All"
                          ZIndex="1">

                        <ImageButton Source="menu_aberto.png"
                                     Grid.Column="0"
                                     Grid.Row="1"
                                     BackgroundColor="Transparent"
                                     Clicked="OnMenuClicked"/>

                        <ImageButton Source="bolsa_compras.png"
                                     BackgroundColor="Transparent"
                                     Grid.Column="2"
                                     Grid.Row="1"
                                     Clicked="OnCartClicked"/>

                    </Grid>

                    <!-- Capa -->

                    <Image Source="download2.jpeg"
                       Aspect="AspectFill"
                       AbsoluteLayout.LayoutBounds="0.5,1,1,0.86"
                       AbsoluteLayout.LayoutFlags="All"
                       Grid.Row="1"/>

                    <!-- Avatar sobreposto -->
                    <Border BackgroundColor="White"
                        AbsoluteLayout.LayoutBounds="0.5,1,90,90"
                        AbsoluteLayout.LayoutFlags="PositionProportional"
                        ZIndex="1"
                        Grid.Row="1"
                        Grid.Column="0">

                        <Border.StrokeShape>

                            <RoundRectangle CornerRadius="60"/>

                        </Border.StrokeShape>

                        <Image Source="download1.jpeg" Aspect="AspectFill"/>

                    </Border>

                    <!-- Corpo arredondado -->
                    <Border BackgroundColor="White"
                        StrokeThickness="0"
                        AbsoluteLayout.LayoutBounds="0.5,1,1,0.18"
                        AbsoluteLayout.LayoutFlags="All"
                        ZIndex="0"
                        Grid.Row="1"
                        Grid.Column="0">

                        <Border.StrokeShape>

                            <RoundRectangle CornerRadius="40,40,0,0"/>

                        </Border.StrokeShape>

                    </Border>

                </AbsoluteLayout>

            </FlexLayout>

            <!-- Stack para os carrosseis -->
            <Grid Grid.Row="1" Grid.Column="0" RowDefinitions="*,*,*,*" ColumnDefinitions="*" AbsoluteLayout.LayoutBounds="0.5,1,1,1">

                
                <!-- OFERTAS DA SEMANA -->
                <Grid RowDefinitions="Auto,Auto"
                      ColumnDefinitions="*"
                      Grid.Row="0"
                      Grid.Column="0"
                      BackgroundColor="LightGray">

                    <Label Text="!OFERTAS DA SEMANA!"
                           FontSize="18"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           Grid.Row="0"
                           Grid.Column="0"/>

                    <CollectionView Grid.Row="1"
                                        Grid.Column="0"
                                        ItemsSource="{Binding Ofertas}"
                                        ItemsLayout="HorizontalList">

                        <CollectionView.ItemTemplate>

                            <DataTemplate>

                                <Border WidthRequest="140"
                                                HeightRequest="160"
                                                BackgroundColor="White"
                                                StrokeShape="RoundRectangle 20">

                                    <VerticalStackLayout>

                                        <Image Source="{Binding Imagem}"
                                                       HeightRequest="110"
                                                       Aspect="AspectFill"/>

                                        <Label Text="{Binding Nome}"
                                                       FontSize="14"
                                                       FontAttributes="Bold"
                                                       HorizontalOptions="Center"/>

                                        <Label Text="{Binding Descricao}"
                                                       FontSize="12"
                                                       HorizontalOptions="Center"
                                                       LineBreakMode="TailTruncation"/>

                                    </VerticalStackLayout>

                                </Border>

                            </DataTemplate>

                        </CollectionView.ItemTemplate>

                    </CollectionView>

                </Grid>

                <BoxView BackgroundColor="Transparent" Grid.Row="1"></BoxView>

                <!-- RODÍZIO EM CASA -->
                <Grid RowDefinitions="Auto,Auto"
                      BackgroundColor="LightGray"
                      Padding="10"
                      Grid.Row="2"
                      Grid.Column="0">

                    <Label Text="RODÍZIO EM CASA"
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               Grid.Row="0"/>

                    <CollectionView Grid.Row="1"
                                        ItemsSource="{Binding Rodizio}"
                                        ItemsLayout="HorizontalList"
                                        HeightRequest="180"
                                        Margin="0,10">

                        <CollectionView.ItemTemplate>

                            <DataTemplate>

                                <Border WidthRequest="140"
                                            HeightRequest="160"
                                            BackgroundColor="White"
                                            StrokeShape="RoundRectangle 20">

                                    <VerticalStackLayout>

                                        <Image Source="{Binding Imagem}"
                                                   HeightRequest="110"
                                                   Aspect="AspectFill"/>

                                        <Label Text="{Binding Nome}"
                                                   FontSize="14"
                                                   FontAttributes="Bold"
                                                   HorizontalOptions="Center"/>

                                        <Label Text="{Binding Descricao}"
                                                   FontSize="12"
                                                   HorizontalOptions="Center"
                                                   LineBreakMode="TailTruncation"/>

                                    </VerticalStackLayout>

                                </Border>

                            </DataTemplate>

                        </CollectionView.ItemTemplate>

                    </CollectionView>

                </Grid>

                <BoxView BackgroundColor="Transparent" Grid.Row="3"></BoxView>

            </Grid>

        </Grid>
    
    </ScrollView>

</ContentPage>
